<ion-content class="ion-padding">

  <div *ngIf="compras.length === 0" class="empty-state">
    No hay productos añadidos al carrito.
  </div>

  <ion-list *ngIf="compras.length > 0" class="compras-list">
    <ion-item *ngFor="let compra of compras" class="compra-item">

      <ion-label class="full-width text-center">
        <h2>{{ compra.producto }}</h2>
        <p>Cantidad: {{ compra.cantidad }}</p>
        <p>Total: {{ totalCompra(compra) }} Bs.</p>
        <p>Estado: {{ compra.estado }}</p>

        <div *ngIf="getNotificaciones(compra).length > 0" class="notificaciones">
          <p>Notificaciones:</p>
          <!-- <ul>
            <li *ngFor="let n of getNotificaciones(compra)">{{ n.mensaje }}</li>
          </ul> -->
        </div>

        <div class="timeline-zigzag">
          <div *ngFor="let t of getTimeline(compra); let i = index" class="timeline-step" [class.done]="t.done"
            [class.left]="i % 2 === 0" [class.right]="i % 2 !== 0">

            <div class="circle">{{ t.done ? '✔' : '' }}</div>
            <div class="label">{{ t.label }}</div>
            <!-- Línea vertical que conecta -->
            <div class="line-vertical" *ngIf="i < getTimeline(compra).length - 1"></div>
          </div>
        </div>

      </ion-label>

    </ion-item>
  </ion-list>

</ion-content>