<ion-content class="ion-padding white-background">
  <ion-grid>
    <ion-row>
      <ion-col size="12">
        <h2 class="titulo">{{ producto?.nombre }}</h2>
      </ion-col>
    </ion-row>

    <ion-row>
      <ion-col>
        <p><strong>Antes:</strong> 
          <s>${{ (producto?.precio * 1.2) | number:'1.2-2' }}</s>
        </p>
        <p class="precio-actual">
          <strong>Ahora:</strong> ${{ producto?.precio }}
          <ion-badge color="danger">
            Ahorra ${{ ((producto?.precio * 1.2) - producto?.precio) | number:'1.2-2' }}
          </ion-badge>
        </p>
      </ion-col>
    </ion-row>

    <ion-item>
      <ion-label position="stacked">Cantidad</ion-label>
      <ion-input
        type="number"
        [(ngModel)]="productoSeleccionado.cantidad"
        min="1"
        [max]="producto?.stock"
        inputmode="numeric">
      </ion-input>
    </ion-item>

    <p class="disponible">{{ producto?.stock }} disponible(s)</p>

    <ion-item>
      <ion-label>Precio total:</ion-label>
      <ion-badge color="success">{{ precioTotal }}</ion-badge>
    </ion-item>

    <ion-item *ngIf="descuentoAplicado">
      <ion-label color="danger">{{ descuentoAplicado }}</ion-label>
    </ion-item>

    <ion-row class="ion-margin-top">
      <ion-col size="6">
        <ion-button expand="block" fill="outline" color="primary" shape="round" (click)="agregarAlCarrito()">
          Añadir al carrito
        </ion-button>
      </ion-col>
      <ion-col size="6">
        <ion-button expand="block" fill="solid" color="success" shape="round" (click)="hacerPedido()">
          Comprar ahora
        </ion-button>
      </ion-col>
    </ion-row>

    <ion-accordion-group class="ion-margin-top" *ngIf="producto?.descripcion">
      <ion-accordion value="descripcion">
        <ion-item slot="header">
          <ion-label>Descripción</ion-label>
        </ion-item>
        <div class="ion-padding" slot="content">
          <p>{{ producto?.descripcion }}</p>
        </div>
      </ion-accordion>
    </ion-accordion-group>
  </ion-grid>
</ion-content>
